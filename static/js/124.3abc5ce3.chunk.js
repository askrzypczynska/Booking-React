"use strict";(self.webpackChunkbooking=self.webpackChunkbooking||[]).push([[124],{124:function(e,n,a){a.r(n),a.d(n,{default:function(){return Z}});var t=a(413),s=a(165),r=a(861),c=a(885),l=a(791),i=a(336),o=a(872),d=a(834),u=a(453),h=a(184);function p(e){var n=(0,d.Z)(),a=(0,c.Z)(n,2),p=a[0],m=a[1],f=(0,l.useState)(p.email),x=(0,c.Z)(f,2),j=x[0],v=x[1],Z=(0,l.useState)(""),b=(0,c.Z)(Z,2),g=b[0],k=b[1],N=(0,l.useState)(!1),w=(0,c.Z)(N,2),y=w[0],S=w[1],z=(0,l.useState)({email:"",password:""}),E=(0,c.Z)(z,2),C=E[0],D=E[1],O=(0,l.useState)(!1),U=(0,c.Z)(O,2),A=U[0],I=U[1],T=Object.values(C).filter((function(e){return e})).length,W=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){var a,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),S(!0),e.prev=2,a={idToken:p.token,email:j,returnSecureToken:!0},g&&(a.password=g),e.next=7,u.Z.post("accounts:update",a);case 7:t=e.sent,I(!0),m({email:t.data.email,token:t.data.idToken,userID:t.data.localId}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0.response);case 15:S(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){(0,o.o)(j)?D((0,t.Z)((0,t.Z)({},C),{},{email:""})):D((0,t.Z)((0,t.Z)({},C),{},{email:"Niepoprawny email"}))}),[j]),(0,l.useEffect)((function(){g.length>=4||0==g.length?D((0,t.Z)((0,t.Z)({},C),{},{password:""})):D((0,t.Z)((0,t.Z)({},C),{},{password:"Wymagane 4 znaki"}))}),[g]),(0,h.jsxs)("form",{onSubmit:W,children:[A?(0,h.jsx)("div",{className:"alert alert-success",children:"Dane Zapisane"}):null,(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Email"}),(0,h.jsx)("input",{type:"email",value:j,onChange:function(e){return v(e.target.value)},className:"form-control ".concat(C.email?"is-invalid":"is-valid")}),(0,h.jsx)("div",{className:"invalid-feedback",children:C.email}),(0,h.jsx)("div",{className:"valid-feedback",children:"Email poprawny"})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Has\u0142o"}),(0,h.jsx)("input",{type:"password",value:g,onChange:function(e){return k(e.target.value)},className:"form-control ".concat(C.password?"is-invalid":"")}),(0,h.jsx)("div",{className:"invalid-feedback",children:C.password})]}),(0,h.jsx)(i.Z,{loading:y,label:"Zaloguj",disabled:T,children:"Zapisz"})]})}var m=a(880),f=a(523),x=a(411),j=a(379);function v(e){var n=(0,d.Z)(),a=(0,c.Z)(n,1)[0],t=(0,m.$B)().url,i=(0,l.useState)([]),o=(0,c.Z)(i,2),u=o[0],p=o[1],v=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.get("/hotels.json");case 3:n=e.sent,t=(0,j.o)(n.data).filter((function(e){return e.user_id===a.userID})),p(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.delete("/hotels/".concat(n,".json"));case 3:p(u.filter((function(e){return e.id!==n}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){v()}),[]),(0,h.jsxs)("div",{children:[u?(0,h.jsxs)("table",{className:"table",children:[(0,h.jsxs)("thead",{children:[(0,h.jsx)("th",{children:"Nazwa"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Opcje"})]}),(0,h.jsx)("tbody",{children:u.map((function(e){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.name}),(0,h.jsx)("td",{children:1==e.status?(0,h.jsx)("span",{className:"badge bg-success text-light",children:"Aktywny"}):(0,h.jsx)("span",{className:"badge bg-secondary text-light",children:"Ukryty"})}),(0,h.jsxs)("td",{children:[(0,h.jsx)(f.rU,{to:"/profil/hotele/edytuj/".concat(e.id),className:"btn btn-outline-primary",children:"Edytuj"}),(0,h.jsx)("button",{onClick:function(){return Z(e.id)},className:"ml-2 btn btn-outline-danger",children:"Usu\u0144"})]})]})}))})]}):(0,h.jsx)("p",{children:"Nie masz jeszcze \u017cadnego hotelu."}),(0,h.jsx)(f.rU,{to:"".concat(t,"/dodaj"),className:"btn btn-primary",children:"Dodaj hotel"})]})}function Z(e){var n=(0,m.$B)(),a=n.path,t=n.url;return(0,h.jsxs)("div",{className:"card",children:[(0,h.jsx)("div",{className:"card-header",children:(0,h.jsx)("h2",{children:"M\xf3j profil"})}),(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsxs)("ul",{className:"nav nav-tabs",children:[(0,h.jsx)("li",{className:"nav-item",children:(0,h.jsx)(f.OL,{className:"nav-link",exact:!0,to:"".concat(t),children:"Profil"})}),(0,h.jsx)("li",{className:"nav-item",children:(0,h.jsx)(f.OL,{className:"nav-link",to:"".concat(t,"/hotele"),children:"Hotele"})})]}),(0,h.jsx)("div",{className:"pt-4",children:(0,h.jsxs)(m.rs,{children:[(0,h.jsx)(m.AW,{path:"".concat(a,"/hotele"),component:v}),(0,h.jsx)(m.AW,{path:"".concat(a),component:p})]})})]})]})}}}]);
//# sourceMappingURL=124.3abc5ce3.chunk.js.map